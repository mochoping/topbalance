<!DOCTYPE html>
<html xml:th="http://www.thymeleaf.org" lang="ko">
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>WISHTREE - JOIN</title>
    <link rel="stylesheet" href="/css/styles.css">
    <script src="/js/script.js" defer></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <style>
        .enabled {
            color: green;
        }

        .unabled {
            color: red;
        }
    </style>
</head>
<body>
<!-- Main Content -->
<div class="register-container">
    <!-- Header -->
    <th:block th:replace="~{layout/header :: header}"></th:block>
    <H1>회원가입</H1>
    <form action="/register-success" method="post" id="checkRegExp" class="register-content"
          enctype="application/x-www-form-urlencoded"
          onsubmit="return false"> <!-- 제출막기-->
        <div>
            <label for="userId">아이디</label>
            <input type="text" id="userId" name="userId" onblur="ExpcheckId(event)" required>
            <p id="id_result"></p>
            <p id="idCheck_result"></p>
            <button id="checkidButton" type="button">중복 확인</button>
        </div>
        <SCRIPT>
            $(document).ready(function () {
                $('#checkidButton').click(function () {
                    const userId = $('#userId').val();
                    if (!userId) {
                        alert('아이디는 공백이 될 수 없습니다.');
                        return;
                    }
                    $.ajax({
                        url: '/check-userId',
                        type: 'POST',
                        data: {userId: userId},
                        success: function (response) {
                            if (response.userExists) {
                                $('#idCheck_result').text('이미 사용중인 유저이름입니다.').css('color', 'red');
                            } else {
                                $('#idCheck_result').text('사용가능한 유저이름입니다.').css('color', 'green');
                            }
                        },
                        error: function () {
                            alert('서버 요청 중 오류가 발생했습니다. 유저네임 중복확인 불가합니다.');
                        }
                    })
                });
            });
        </SCRIPT>
        <br><br>
        <label for="userPassword">비밀번호</label>
        <input type="password" id="userPassword" name="userPassword" required>
        <p id="pwResult1"></p>
        <label for="userRepeatPassword">비밀번호확인</label>
        <input type="password" id="userRepeatPassword" name="userRepeatPassword" onblur="checkingPw(event)">
        <p id="pwResult2"></p>
        <br><br>
        <label for="userName">이름</label>
        <input type="text" id="userName" name="userName" required>
        <p id="nameResult"></p>
        <br><br>
        <label for="userPhone">핸드폰번호</label>
        <input type="text" id="userPhone" name="userPhone" placeholder="010-XXXX-XXXX" required>
        <p id="phoneResult"></p>
        <br><br>
        <label for="userBirthdate">생년월일</label>
        <input type="Date" id="userBirthdate" name="userBirthdate" required>
        <br><br>
        <label>성별(필수아님)</label>
        <br>
        <label for="male" class="radioClick">
            <input type="radio" id="male" name="userGender" value="MALE">남성
        </label>
        <label for="female" class="radioClick">
            <input type="radio" id="female" name="userGender" value="FEMALE">여성
        </label>
        <br><br>
        <button type="submit">가입하기</button>
    </form>


    <!-- Footer -->
    <th:block th:replace="~{layout/footer :: footer}"></th:block>
</div>
<script src="/js/wishtreeUserRegExp.js"></script>

</body>
</html>